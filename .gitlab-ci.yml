stages:
  - test

test-backend:
  stage: test
  image: python:3.11-slim
  script:
    - cd backend
    - pip install -q fastapi uvicorn pydantic python-dotenv requests httpx
    - python -c "import main; print('Backend OK')"

test-frontend:
  stage: test
  image: node:20-alpine
  script:
    - cd frontend
    - npm ci --silent
    - npm run build
  cache:
    key: "$CI_COMMIT_REF_SLUG"
    paths:
      - frontend/node_modules/
