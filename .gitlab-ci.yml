# ğŸš€ GitLab CI/CD - Ù†Ø³Ø®Ù‡ Ø³Ø§Ø¯Ù‡
# ÙÙ‚Ø· push Ú©Ù†ØŒ Ø¨Ù‚ÛŒÙ‡â€ŒØ§Ø´ Ø®ÙˆØ¯Ú©Ø§Ø±Ù‡!

stages:
  - test

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ ØªØ³Øª Backend
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
test-backend:
  stage: test
  image: python:3.11-slim
  script:
    - cd backend
    - pip install -q fastapi uvicorn pydantic python-dotenv requests httpx
    - python -c "import main; print('âœ… Backend OK')"
  only:
    changes:
      - backend/**/*

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# âš›ï¸ ØªØ³Øª Frontend
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
test-frontend:
  stage: test
  image: node:20-alpine
  script:
    - cd frontend
    - npm ci --silent
    - npm run build
  only:
    changes:
      - frontend/**/*
  cache:
    key: ${CI_COMMIT_REF_SLUG}
    paths:
      - frontend/node_modules/
